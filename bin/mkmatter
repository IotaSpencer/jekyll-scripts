#!/usr/bin/ruby
require 'highline'
require 'jekyllposter/questions'
require 'jekyllposter/answers'
Signal.trap('INT') do
  puts
  puts "Got INT.. Exiting"
  exit 0
end
@answers = nil
@hl      = HighLine.new

def main
  draft = @hl.agree "Is this a draft post/page? ", true
  
  layout = @hl.choose do |menu|
    menu.header = "Layout"
    menu.choice :post
    menu.choice :page
    menu.prompt  = "? "
    menu.default = :post
  end
  case layout
    when :post
      @answers = Jekyllposter::Questions::Post.new.ask
    when :page
      @answers = Jekyllposter::Questions::Page.new.ask
  
  end
end

loop do
  main
  do_loop = @hl.agree "Would you like to try again?", true
  if do_loop
    puts "Restarting!"
  else
    puts "Break out!"
    exit 0
    
  end
end

at_exit do
  puts "Exiting..."
end